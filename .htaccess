RewriteEngine On

# --- Never rewrite CSS/JS/Images ---
RewriteCond %{REQUEST_URI} \.(css|js|png|jpg|jpeg|gif|svg|webp|ico)$ [NC]
RewriteRule .* - [L]

# --- Never rewrite assets folder ---
RewriteCond %{REQUEST_URI} ^/assets/ [NC]
RewriteRule .* - [L]

# --- Never rewrite admin and backend folders ---
RewriteCond %{REQUEST_URI} ^/(admin|backend|uploads)/ [NC]
RewriteRule .* - [L]

# --- Remove .php extension from URLs ---
# Redirect from /page.php to /page
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R=301,L]

# --- Add .php extension internally ---
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^([^/]+)/?$ $1.php [L]

# --- ONLY rewrite URLs starting with /it-services/ ---
RewriteCond %{REQUEST_URI} ^/it-services/ [NC]

# Do NOT rewrite the actual HTML file itself
RewriteCond %{REQUEST_URI} !^/it-services\.php$ [NC]

# Pretty URL â†’ it-services.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^it-services/([^/]+)/?$ /it-services.php?slug=$1 [L,QSA]

<IfModule mod_headers.c>
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept"
</IfModule>
