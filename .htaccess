RewriteEngine On

# --- Never rewrite CSS/JS/Images ---
RewriteCond %{REQUEST_URI} \.(css|js|png|jpg|jpeg|gif|svg|webp|ico)$ [NC]
RewriteRule .* - [L]

# --- Never rewrite assets folder ---
RewriteCond %{REQUEST_URI} ^/assets/ [NC]
RewriteRule .* - [L]

# --- Never rewrite backend/admin/uploads folders ---
RewriteCond %{REQUEST_URI} ^/(backend|admin|uploads)/ [NC]
RewriteRule .* - [L]

# --- ONLY rewrite URLs starting with /it-services/ ---
RewriteCond %{REQUEST_URI} ^/it-services/ [NC]

# Do NOT rewrite the actual HTML file itself
RewriteCond %{REQUEST_URI} !^/it-services\.php$ [NC]

# Pretty URL â†’ it-services.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^it-services/([^/]+)/?$ /it-services.php?slug=$1 [L,QSA]

# --- Remove .php extension from all PHP files ---
# Redirect .php URLs to clean URLs (301 permanent redirect)
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R=301,L]

# Rewrite clean URLs to .php files
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [L]

# Handle index.php as root
DirectoryIndex index.php

<IfModule mod_headers.c>
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept"
</IfModule>
